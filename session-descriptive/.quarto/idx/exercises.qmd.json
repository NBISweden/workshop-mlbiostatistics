{"title":"Exercises","markdown":{"yaml":{"output":"html_document","editor_options":{"chunk_output_type":"console"}},"headingText":"Exercises","containsRefs":false,"markdown":"\n\n```{r, include=T, message=FALSE, warning=FALSE}\n# load libraries\nlibrary(tidyverse)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggbeeswarm)\nlibrary(gridExtra)\n```\n\n\n::: {#exr-diabetes}\n\n## Summarize diabetes data\n\nUse below code to load diabetes data set and calculate `BMI` and add categorical variable `obese` (Yes) if $BMI \\ge 30$ and No otherwise. Summarize variables: `obese`, `age` and `gender` reporting mean and sample standard deviation for numerical variables and counts and percentage per group for categorical variables.\n\nCan you figure out how to use `arsenal` and/or `gtsummary` packages to check your results and generate publication ready table?\n\n:::\n\n```{r}\n#| code-fold: false\n\nlibrary(faraway)\nlibrary(tidyverse)\n\ninch2m <- 2.54/100\npound2kg <- 0.45\ndata_diabetes <- diabetes %>%\n  mutate(height  = height * inch2m, height = round(height, 2)) %>% \n  mutate(waist = waist * inch2m) %>%  \n  mutate(weight = weight * pound2kg, weight = round(weight, 2)) %>%\n  mutate(BMI = weight / height^2, BMI = round(BMI, 2)) %>% \n  mutate(obese= cut(BMI, breaks = c(0, 29.9, 100), labels = c(\"No\", \"Yes\"))) \n  \n```\n\n\n::: {#exr-diabetes-plot}\n\n## Plot diabetes data\n\nTry various plots to visualize diabetes variables: `BMI` and `gender`. Start by making a histogram and density plot for BMI and box plot of BMI stratified by gender status. Can you think of any other plots that may be useful here to visualize the relationships between BMI and gender?\n\n:::\n\n## Solutions: Descriptive statistics {-}  \n\n::: {.solution}\n@exr-diabetes\n:::\n\nAge is a numerical variable and we can calculate mean and sample standard deviation for example as below: \n\n```{r}\n#| code-fold: false\ndata_diabetes %>%\n  select(age) %>%\n  summarize(age_mean = mean(age, na.rm = T), \n            age_sd = sd(age, na.rm = T)) %>%\n  print()\n\n```\n\nGender and obesity status are categorical variables and we can calculate counts and percentages per groups as below:\n```{r}\n#| code-fold: false\n\nsummary_gender <- data_diabetes %>%\n  select(gender) %>%\n  group_by(gender) %>%\n  summarize(n = n()) %>%\n  mutate(percent = n * 100 / nrow(data_diabetes)) %>%\n  print()\n  \nsummary_obese <- data_diabetes %>%\n  select(obese) %>%\n  group_by(obese) %>%\n  summarize(n = n()) %>%\n  mutate(percent = n * 100 / nrow(data_diabetes)) %>%\n  print()\n```\n\nAlternatively, we can use one of the many R data summaries packages, for instance `arsenal` to summarize obesity status by age and gender.\n```{r}\n#| messages: false\n#| warning: false\n#| collapse: true\n#| code-fold: false\n#| results: asis\n\nlibrary(arsenal)\n\ntab1 <- tableby(obese ~ gender + age, data=data_diabetes)\nsummary(tab1)\n\n```\n\nAnother popular package is `gtsummary` that calculates descriptive statistics for continuous, categorical, and dichotomous variables in R, and presents the results in customizable summary table ready for publication. \n\n```{r}\n#| messages: false\n#| warning: false\n#| collapse: true\n#| code-fold: false\n\nlibrary(gtsummary)\n\ndata_diabetes %>%\n  select(age, gender, obese) %>%\n  tbl_summary(by = obese, \n              statistic = list(all_continuous() ~ \"{mean} ({sd})\"))\n\n```\n\n\n\n::: {.solution}\n@exr-diabetes-plot\n:::\n\n```{r}\n#| code-fold: false\n#| collapse: true\n#| fig-keep: all\n#| message: false\n#| warning: false\n\nfont.size <- 12\ncol.blue.light <- \"#a6cee3\"\ncol.blue.dark <- \"#1f78b4\"\nmy.ggtheme <- theme(axis.title = element_text(size = font.size), \n        axis.text = element_text(size = font.size), \n        legend.text = element_text(size = font.size), \n        legend.title = element_blank(), \n        legend.position = \"top\", \n        axis.title.y = element_text(angle = 0)) + theme_bw()\n  \nplt_hist <- data_diabetes %>%\n  ggplot(aes(x = BMI)) +\n  geom_histogram() + \n  my.ggtheme\n\nplt_density <- data_diabetes %>%\n  ggplot(aes(x = BMI)) +\n  geom_density() + \n  my.ggtheme\n\nplt_boxplot <- data_diabetes %>%\n  ggplot(aes(x = gender, y = BMI)) + \n  geom_boxplot() + \n  my.ggtheme\n  \n\nplt_hist\nplt_density\nplt_boxplot           \n\n```\n\nIn addition, we could for instance try beeswarm plot and/or histogram stratified by gender. Or we can try also overlaying box plots over the jitter plot either for all BMI variables or separately for males and females. Sometimes, it may be also a good idea to plot summary statistics, e.g. a barplot at a height of means and error bars representing standard deviation, error bars or confidence intervals. See this post for inspiration if you'd like to try plotting the summary statistics instead [http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/](http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/)\n\n\n\n","srcMarkdownNoYaml":"\n# Exercises\n\n```{r, include=T, message=FALSE, warning=FALSE}\n# load libraries\nlibrary(tidyverse)\nlibrary(kableExtra)\nlibrary(ggplot2)\nlibrary(ggbeeswarm)\nlibrary(gridExtra)\n```\n\n\n::: {#exr-diabetes}\n\n## Summarize diabetes data\n\nUse below code to load diabetes data set and calculate `BMI` and add categorical variable `obese` (Yes) if $BMI \\ge 30$ and No otherwise. Summarize variables: `obese`, `age` and `gender` reporting mean and sample standard deviation for numerical variables and counts and percentage per group for categorical variables.\n\nCan you figure out how to use `arsenal` and/or `gtsummary` packages to check your results and generate publication ready table?\n\n:::\n\n```{r}\n#| code-fold: false\n\nlibrary(faraway)\nlibrary(tidyverse)\n\ninch2m <- 2.54/100\npound2kg <- 0.45\ndata_diabetes <- diabetes %>%\n  mutate(height  = height * inch2m, height = round(height, 2)) %>% \n  mutate(waist = waist * inch2m) %>%  \n  mutate(weight = weight * pound2kg, weight = round(weight, 2)) %>%\n  mutate(BMI = weight / height^2, BMI = round(BMI, 2)) %>% \n  mutate(obese= cut(BMI, breaks = c(0, 29.9, 100), labels = c(\"No\", \"Yes\"))) \n  \n```\n\n\n::: {#exr-diabetes-plot}\n\n## Plot diabetes data\n\nTry various plots to visualize diabetes variables: `BMI` and `gender`. Start by making a histogram and density plot for BMI and box plot of BMI stratified by gender status. Can you think of any other plots that may be useful here to visualize the relationships between BMI and gender?\n\n:::\n\n## Solutions: Descriptive statistics {-}  \n\n::: {.solution}\n@exr-diabetes\n:::\n\nAge is a numerical variable and we can calculate mean and sample standard deviation for example as below: \n\n```{r}\n#| code-fold: false\ndata_diabetes %>%\n  select(age) %>%\n  summarize(age_mean = mean(age, na.rm = T), \n            age_sd = sd(age, na.rm = T)) %>%\n  print()\n\n```\n\nGender and obesity status are categorical variables and we can calculate counts and percentages per groups as below:\n```{r}\n#| code-fold: false\n\nsummary_gender <- data_diabetes %>%\n  select(gender) %>%\n  group_by(gender) %>%\n  summarize(n = n()) %>%\n  mutate(percent = n * 100 / nrow(data_diabetes)) %>%\n  print()\n  \nsummary_obese <- data_diabetes %>%\n  select(obese) %>%\n  group_by(obese) %>%\n  summarize(n = n()) %>%\n  mutate(percent = n * 100 / nrow(data_diabetes)) %>%\n  print()\n```\n\nAlternatively, we can use one of the many R data summaries packages, for instance `arsenal` to summarize obesity status by age and gender.\n```{r}\n#| messages: false\n#| warning: false\n#| collapse: true\n#| code-fold: false\n#| results: asis\n\nlibrary(arsenal)\n\ntab1 <- tableby(obese ~ gender + age, data=data_diabetes)\nsummary(tab1)\n\n```\n\nAnother popular package is `gtsummary` that calculates descriptive statistics for continuous, categorical, and dichotomous variables in R, and presents the results in customizable summary table ready for publication. \n\n```{r}\n#| messages: false\n#| warning: false\n#| collapse: true\n#| code-fold: false\n\nlibrary(gtsummary)\n\ndata_diabetes %>%\n  select(age, gender, obese) %>%\n  tbl_summary(by = obese, \n              statistic = list(all_continuous() ~ \"{mean} ({sd})\"))\n\n```\n\n\n\n::: {.solution}\n@exr-diabetes-plot\n:::\n\n```{r}\n#| code-fold: false\n#| collapse: true\n#| fig-keep: all\n#| message: false\n#| warning: false\n\nfont.size <- 12\ncol.blue.light <- \"#a6cee3\"\ncol.blue.dark <- \"#1f78b4\"\nmy.ggtheme <- theme(axis.title = element_text(size = font.size), \n        axis.text = element_text(size = font.size), \n        legend.text = element_text(size = font.size), \n        legend.title = element_blank(), \n        legend.position = \"top\", \n        axis.title.y = element_text(angle = 0)) + theme_bw()\n  \nplt_hist <- data_diabetes %>%\n  ggplot(aes(x = BMI)) +\n  geom_histogram() + \n  my.ggtheme\n\nplt_density <- data_diabetes %>%\n  ggplot(aes(x = BMI)) +\n  geom_density() + \n  my.ggtheme\n\nplt_boxplot <- data_diabetes %>%\n  ggplot(aes(x = gender, y = BMI)) + \n  geom_boxplot() + \n  my.ggtheme\n  \n\nplt_hist\nplt_density\nplt_boxplot           \n\n```\n\nIn addition, we could for instance try beeswarm plot and/or histogram stratified by gender. Or we can try also overlaying box plots over the jitter plot either for all BMI variables or separately for males and females. Sometimes, it may be also a good idea to plot summary statistics, e.g. a barplot at a height of means and error bars representing standard deviation, error bars or confidence intervals. See this post for inspiration if you'd like to try plotting the summary statistics instead [http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/](http://www.cookbook-r.com/Graphs/Plotting_means_and_error_bars_(ggplot2)/)\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","self-contained":false,"output-file":"exercises.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"theme":"cosmo","editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}